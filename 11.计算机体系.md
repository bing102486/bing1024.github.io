# 计算机体系结构

## 一.体系结构的概述

### 1.发展

（1）1964年，阿姆达尔（）在介绍 IBM360 系统时指出，计算机体系结构是站在程序员的角度所看到的计算机属性
（2）1982年，梅尔斯
（3）1984年，拜尔

### 2.组成

**（1）结构：** 计算机系统各种硬件的互联
**（2）组织：** 各种部件的动态联系与管理
**（3）实现：** 各模块设计的组装完成
**（4）性能：** 计算机的行能表现

### 3.关系

**（1）计算机体系结构：** 指计算机的概念性结构和功能属性
**（2）计算机组织：** 指计算机结构逻辑实现，包括机器内的数据流和控制流的组成及逻辑实现（常称为计算机组成原理）
**（3）计算机实现：** 指计算机组织的物理实现

## 二.体系结构的分类

### 1.按处理机的数量（宏观）

#### 单处理系统

利用一个处理单元，与其他外部设备结合起来，实现存储、计算、通信、输入、输出等功能系统

#### 并行与多处理系统

为了充分发挥问题求解过程中处理的并行性，将两个以上的处理机互联起来，彼此通信协调，便于共同求解一个大部题的计算机系统

#### 分布式处理系统

物理上远距离、松耦合的多计算机系统

### 2.按并行程度分类（微观）

#### Flynn 分类法

按指令流与数据流的多少分类

单指令流，单数据流（SISD）
单指令流，多数据流（SIMD）
多指令流，单数据流（MISD）（理论意义）
多指令流，多数据流（MIMD）

#### 马云泽分类法

按最大并行度（PM）指单位时间内能够处理的最大二进制位数

字串行位串行（WSBS）
字并行位串行（WPBS）
字串行位并行（WSBP）
字并行位并行（WPBP）

#### Handle 分类法

基于硬件并行程度和计算并行程度

#### Kuck 分类法

按指令流和执行流及多重性

单指令流，单执行流（SISE）
单指令流，多执行流（SIME）
多指令流，单执行流（MISE）
多指令流，多执行流（MIME）

## 三.指令系统
 
### 1.指令集体系结构

**（1）** 操作数在 CPU 中的存储方式（操作数从主存中取出后保存在什么地方）
**（2）** 显示操作数的数量（在典型的指令中有多少个显示命名的操作数）
**（3）** 操作数的位置（即任一个ALU指令的操作数能否放在主存中，如何定位）
**（4）** 指令的操作（提供哪些操作）
**（5）** 操作数的类型与大小

### 2.暂存机制

根据在 CPU 内部存储操作数的区别，可以把指令集体系分为 堆栈，累加器，寄存器组 3类

### 3.复杂指令集（CISC）

#### 弊端

（1）指令集过于庞杂
（2）微程序技术是 CISC 的重要支柱，每条复杂指令要通过执行一段解释性微程序才能完成，因此需要多个 CPU 周期，降低了处理速度
（3）


### 4.精简指令集（RISC）

#### 关键技术

（1）重叠寄存器窗口技术
（2）优化编译技术
（3）超流水及超标量技术
（4）在微程序技术中结合硬布线逻辑与微程序

### 5.指令的流水处理

假如完成某操作，有 N 个子任务，每个子任务运行时间为 t【每个子任务时间不同地，则 t 取决于执行顺序最慢的 】，子任务运行时间和为Nt（任务1时间 + 子任务2时间 + 子任务3时间 + .....，）

完成K个操作（eg：计算含输入、计算、输出三个子任务，即N=3，各子任务1ns(纳秒)，2ns，1ns，即：t=2ns，Nt=4ns， 完成100个该任务，即：K=100）：

以传统方式：K * Nt（eg：100 * 4ns =400ns）

以流水线方式：Nt + (K-1) * t （eg：4ns + (100-1) * 2ns =202ns）

流水线的吞吐率计算

单位时间（默认1s）内，流水线完成的任务数/输出数
计算公式：吞吐率（TP = n / Tk ）n：任务数，Tk：完成n个任务的时间：参考流水线执行时间计算(n=K)【Nt + (K-1) * t 】
注意时间：单位时间：无说明为1s 纳秒：1s=1 * 109ns

eg：100 / 202ns =0.495ns 转秒： 0.495 * 109 或 4.95 * 108 /s
加速比计算

不采用流水线时间 / 采用流水线时间 的比值，用来衡量执行性能
eg：400ns / 202ns = 1.98ns


## 四.阵列处理机、并行处现机、多处理机

### 1.并行性

同时性（同一时间） + 并发性（多个事件）

（1）存储器操作并行
（2）处理器操作步聚并行（流水线处理机）
（3）处理器操作并行（阵列处理机）
（4）指令，任务、作业并行（多处理机，分布处理系统，计算机网络）

### 2.阵列处理机

将重复设设置的多个处理单元（PU），按一定方式连成阵列，在单个控制部件（CU）控制下，对分配置的数据进行处理，并行的完成一条指定所规定的操作【单指令多数据流SIMD】

### 3.并行处理机

SIMD，MIMD 是典行的并行计算机；SIMD 有共享存储器和分布式存储器两种

### 4.多处理机

是由多台处理机组成的系统，每台有属于自己的控制部件，可以执行独立程序，共享一个主存储器和所有外部设备，性能取决于机器间的互连技术【多指令，多数据流MIMD】
